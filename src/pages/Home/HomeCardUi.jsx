import React, { useContext, useState } from 'react'
import { SteteContext } from '../../App'

function HomeCardUi({ item }) {
    const { title, id, category, image, price } = item
    const { basketState, basketDispatch } = useContext(SteteContext)
    const [count, setCount] = useState(1)
    const addToBasket = () => {

        const check = basketState.basket.some(element => element.id === id)

        if (check) {
            basketDispatch({
                type: "ADD_CAUNT_TO_BASKET",
                payload: { id: item.id, count: +count }
            });
            return;
        }
        const newItem = { ...item, count: +count }
        basketDispatch({ type: "ADD_TO_BASKET", payload: newItem })
        console.log(basketState.basket)
    }
    return (
        <div className='flex flex-col gap-[10px] p-5 w-80 bg-[#FAFAFA] rounded-lg border border-[#ECECEC] items-start'>
            <img className='w-full   rounded-lg' src={item.image} alt="" />
            <h1 className='text-4 font-normal text-[#171515]'>{item.title} </h1>
            <h1 className='text-[24px] font-semibold text-[#00B709]'>{item.price} $</h1>
            <div className='flex flex-row gap-6'>

                <button onClick={addToBasket} className='flex p-2 items-center gap-[10px] bg-[#00B709] rounded text-white '> <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none"><path d="M5.99877 3.26574L6.10151 3.63H6.48H18.97C19.843 3.63 20.6399 3.97363 21.224 4.5907C21.8005 5.22013 22.0903 6.03302 22.0216 6.90052L22.0213 6.90409L21.4813 14.4041L21.4813 14.4041L21.4809 14.41C21.3871 15.9712 20.0103 17.25 18.44 17.25H7.78999C6.94094 17.25 6.12427 16.8894 5.54836 16.2619C4.97195 15.6339 4.67981 14.791 4.74832 13.9409C4.74834 13.9407 4.74836 13.9405 4.74838 13.9403L5.57803 3.98452C5.62152 3.52383 5.45598 3.08787 5.15924 2.76287C4.84888 2.42295 4.42192 2.25 3.98 2.25H2.25C2.11614 2.25 2 2.13386 2 2C2 1.86614 2.11614 1.75 2.25 1.75H3.99001C4.57648 1.75 5.13333 1.99862 5.5306 2.42698C5.75164 2.67329 5.91125 2.95542 5.99877 3.26574ZM6.03 4.59928L5.25185 13.977C5.25182 13.9773 5.2518 13.9776 5.25177 13.9779C5.18988 14.6987 5.42813 15.385 5.90964 15.9159C6.39804 16.4544 7.07441 16.74 7.78999 16.74H18.44C19.7448 16.74 20.8988 15.6553 20.9985 14.3584L20.9987 14.3559L21.5387 6.85591L21.5388 6.85383C21.5875 6.13602 21.3567 5.43648 20.8644 4.9176C20.3763 4.39317 19.7025 4.10999 18.98 4.10999H6.53H6.03V4.59928Z" fill="#FAFAFA" stroke="#FAFAFA" /><path d="M16.5 22.75C15.4 22.75 14.5 21.85 14.5 20.75C14.5 19.65 15.4 18.75 16.5 18.75C17.6 18.75 18.5 19.65 18.5 20.75C18.5 21.85 17.6 22.75 16.5 22.75ZM16.5 20.25C16.22 20.25 16 20.47 16 20.75C16 21.03 16.22 21.25 16.5 21.25C16.78 21.25 17 21.03 17 20.75C17 20.47 16.78 20.25 16.5 20.25Z" fill="#FAFAFA" /><path d="M8.5 22.75C7.4 22.75 6.5 21.85 6.5 20.75C6.5 19.65 7.4 18.75 8.5 18.75C9.6 18.75 10.5 19.65 10.5 20.75C10.5 21.85 9.6 22.75 8.5 22.75ZM8.5 20.25C8.22 20.25 8 20.47 8 20.75C8 21.03 8.22 21.25 8.5 21.25C8.78 21.25 9 21.03 9 20.75C9 20.47 8.78 20.25 8.5 20.25Z" fill="#FAFAFA" /><path d="M21.25 8.75H9.25C8.84 8.75 8.5 8.41 8.5 8C8.5 7.59 8.84 7.25 9.25 7.25H21.25C21.66 7.25 22 7.59 22 8C22 8.41 21.66 8.75 21.25 8.75Z" fill="#FAFAFA" />
                </svg> В корзину</button>
                <button  className='flex items-center p-2 rounded border border-[#ECECEC]  hover:bg-green-100'><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M11.3094 21.0497L11.3094 21.0496L11.3022 21.0471C9.47224 20.4196 7.07073 18.9766 5.13174 16.853C3.19727 14.7343 1.75 11.9693 1.75 8.6901C1.75 5.46418 4.3582 2.8501 7.56 2.8501C9.11753 2.8501 10.5695 3.45746 11.6449 4.54214L12 4.90023L12.3551 4.54214C13.4305 3.45746 14.8825 2.8501 16.44 2.8501C19.6413 2.8501 22.25 5.47366 22.25 8.6901C22.25 11.9744 20.8026 14.7393 18.8684 16.8566C16.9295 18.9789 14.528 20.4195 12.6978 21.0471L12.6978 21.0471L12.6906 21.0497C12.511 21.1143 12.2722 21.1501 12 21.1501C11.7278 21.1501 11.489 21.1143 11.3094 21.0497ZM11.4682 20.5832L11.4719 20.5844C11.6379 20.6398 11.8437 20.6551 12.005 20.6551C12.1663 20.6551 12.3721 20.6398 12.5381 20.5844L12.5381 20.5845L12.5424 20.583C13.7588 20.1652 16.0443 18.982 18.0332 17.0253C20.0283 15.0624 21.76 12.2841 21.76 8.6901C21.76 5.74666 19.3788 3.3501 16.45 3.3501C14.7711 3.3501 13.2121 4.1356 12.208 5.49272L12.2075 5.4935C12.1781 5.53331 12.111 5.5751 12.01 5.5751C11.909 5.5751 11.8419 5.53331 11.8125 5.4935L11.8125 5.49349L11.81 5.4901C10.7866 4.12556 9.23908 3.3501 7.56 3.3501C4.63116 3.3501 2.25 5.74666 2.25 8.6901C2.25 12.279 3.97909 15.0572 5.97286 17.0213C7.96037 18.9792 10.246 20.1652 11.4682 20.5832Z" fill="#171515" stroke="#171515" /></svg>
                </button>
            </div>
        </div>
    )
}

export default HomeCardUi
